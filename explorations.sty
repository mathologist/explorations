\NeedsTeXFormat{LaTeX2e}
\RequirePackage[table]{xcolor}
\ProvidesPackage{explorations}[2017/07/09 Formatting for Math Explorations at San Diego City College]
%
\RequirePackage{amsfonts,amsmath, amssymb,latexsym}
\RequirePackage{graphicx,subfigure,graphpap}
\RequirePackage{longtable}
\RequirePackage[none]{hyphenat}
\newcommand{\numrow}[1]{\ensuremath{#1} & & My justification: \newline \vspace{0.1in} \newline Other number sets?\newline \vspace{0.1in}\\ \hline}

\RequirePackage{hyperref}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
}

\RequirePackage{tcolorbox}
\RequirePackage{multicol}

\RequirePackage{tikz}
\RequirePackage{pgfplots}

\RequirePackage[nolinks]{qrcode}

\RequirePackage{lastpage}
\RequirePackage{fancyhdr}

\RequirePackage{booktabs}
\RequirePackage[normalem]{ulem}

\parindent=0in
\RequirePackage[margin=1in,left=0.75in,right=0.75in,headheight=1in]{geometry}



\RequirePackage{array}
\RequirePackage{enumitem}
\RequirePackage{calc}

\RequirePackage{wrapfig}

\RequirePackage{environ}
\RequirePackage{kvoptions}

% Differentiate between teacher and student versions
\DeclareBoolOption[true]{teacher}
\DeclareComplementaryOption{student}{teacher}

\ProcessKeyvalOptions*

\NewEnviron{dfn}{\begin{tcolorbox}[title=Definition]
    \BODY
  \end{tcolorbox}}

\ifexplorations@teacher
\newcommand{\teacher}[1]{{#1}}
\NewEnviron{notes}{\begin{tcolorbox}[title=Instructor Notes]
    \BODY
  \end{tcolorbox}}
\newcommand{\student}[1]{}
% \let\originaltitle\title
% \renewcommand{\title}[1]{\originaltitle{#1}\chead{\emph{#1 (Instructor Version)}}}
% \newenvironment{module}[3]{\newpage
%   \lhead{\emph{#2}}
%   \rhead{\emph{#3}}
%   \chead{\emph{#1 (Instructor Version)}}}{}
\else
% \newenvironment{module}[3]{\newpage
%   \lhead{\emph{#2}}
%   \rhead{\emph{#3}}
%   \chead{\emph{#1}}}{}
\newcommand{\teacher}[1]{}
\NewEnviron{notes}{}
\newcommand{\student}[1]{{#1}}
% Change how the title is formatted
% \let\originaltitle\title
% \renewcommand{\title}[1]{\originaltitle{#1}\chead{\emph{#1}}}
\fi

%\headsep=0in
\setlength{\unitlength}{1mm}
%
\renewcommand{\theequation}{\thesection.\arabic{equation}}
\newtheorem{proposition}{Proposition}[section]
\newtheorem{theorem}{Theorem}[section]
%
\newcommand{\Rn}{\mathbb{R}}
\newcommand{\Zn}{\mathbb{Z}}
\newcommand{\Qn}{\mathbb{Q}}
\newcommand{\Wn}{\mathbb{W}}
\newcommand{\Nn}{\mathbb{N}}
\newcommand{\lapl}{\mathcal{L}}
\newcommand\half{ \ensuremath{\dfrac{1}{2}} }
\newcommand\imply{\ensuremath{~\Longrightarrow~}}
\newcommand\dint[2]{ \ensuremath{\displaystyle{\int_{{#1}}^{{#2}}}} }
\newcommand\px[2]{\ensuremath{~\dfrac{\partial {#1} }{\partial {#2} }~} }
\newcommand\pxx[2]{\ensuremath{~\dfrac{\partial^2 {#1}}{\partial {#2}^2 }~}}
\newcommand\pxpy[3]{\ensuremath{~\dfrac{\partial^2 {#1} }{\partial {#2} \partial {#3} }~}}
\newcommand\dx[1]{\ensuremath{\dfrac{d}{d{#1}}}}
\newcommand\ddx[1]{\ensuremath{\dfrac{d^2}{d{#1}^2}}}
\newcommand\Nsum[2]{\ensuremath{\displaystyle{\sum_{#1}^{#2}}}}
\newcommand\Nlim[1]{\ensuremath{\displaystyle{\lim_{#1}}}}
\newcommand\Nvec[1]{\ensuremath{{\bf #1}}}
%
\newcommand{\eq}[1]{(\ref{#1})}
\newcommand{\be}{\begin{equation}}
\newcommand{\ee}{\end{equation}}
\newcommand{\bea}{\begin{eqnarray}}
\newcommand{\eea}{\end{eqnarray}}
\newcommand{\beaa}{\begin{eqnarray*}}
\newcommand{\eeaa}{\end{eqnarray*}}
%
%\RequirePackage{mathpazo}
%\RequirePackage{tgpagella}
% \RequirePackage{titlesec}
% \titleformat*{\section}{\bfseries}

\newcommand{\set}[1]{\ensuremath{\left\{ {#1} \right\}}}

\let\originaltitle\title
\renewcommand{\title}[1]{\originaltitle{#1}\chead{\emph{#1}}}
\cfoot{\thepage}
\lfoot{}
%\rfoot{Page \thepage~of~\pageref{LastPage}}
\rfoot{}

\renewcommand\headrule{
  \begin{minipage}{1\textwidth}
    \hrule width \hsize \kern 1mm \hrule width \hsize \kern 1mm
  \end{minipage}}

\pagestyle{fancy}
\AtBeginDocument{\thispagestyle{fancy}}

\newcommand{\module}[1]{\lhead{\emph{#1}}}
\newcommand{\course}[1]{\rhead{\emph{#1}}}
\newcommand{\lesson}[1]{\chead{\emph{#1}}}
\module{}
\course{}
\lesson{}

\renewcommand{\descriptionlabel}[1]{%
  \hspace\labelsep \upshape\bfseries #1:%
}

\usepackage[parfill]{parskip}

\RequirePackage{newfloat}

\DeclareFloatingEnvironment[
  fileext=ex,
  listname={List of Exercises},
  name=Exercise,
  placement=tbhp,
  within=none,
]{exercise}

\DeclareFloatingEnvironment[
  fileext=ws,
  listname={List of Worksheets},
  name=Worksheet,
  placement=tbhp,
  within=none,
]{worksheet}

%\def\title#1{\gdef\@title{#1}\}


\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\RequirePackage{iftex}

\ifLuaTeX
  \usepackage{fontspec}
  \usepackage{microtype}
  \usepackage[bold-style=ISO]{unicode-math}
  \setmainfont[Ligatures={Common,Rare,TeX}]{TeX Gyre Pagella}
  \setsansfont[Numbers=OldStyle,Scale=MatchLowercase]{TeX Gyre Heros}
  \setmathfont{TeX Gyre Pagella Math}
\else
  \RequirePackage[T1]{fontenc}
  \RequirePackage{mathpazo}
  \RequirePackage{helvet}
  \RequirePackage{tgpagella}
  \RequirePackage{microtype}
\fi

% Color-blind friendly colors
\definecolor{cbgray}{HTML}{999999}
\definecolor{cba}{HTML}{E69F00}
\definecolor{cbb}{HTML}{56B4E9}
\definecolor{cbc}{HTML}{009E73}
\definecolor{cbd}{HTML}{F0E442}
\definecolor{cbe}{HTML}{0072B2}
\definecolor{cbf}{HTML}{D55E00}
\definecolor{cbg}{HTML}{CC79A7}

\newcommand{\ispace}[1]{\setlength{\itemsep}{#1}}

%% \RequirePackage{units}
\RequirePackage{nicefrac}
\RequirePackage{siunitx}
\DeclareSIUnit\inch{in}
\DeclareSIUnit\in{in}

\DeclareSIUnit\feet{ft}
\DeclareSIUnit\ft{ft}

\DeclareSIUnit\yard{yd}
\DeclareSIUnit\yd{yd}

\DeclareSIUnit\mile{mi}
\DeclareSIUnit\mi{mi}

\DeclareSIUnit\ounce{oz}
\DeclareSIUnit\oz{oz}

\DeclareSIUnit\pound{lb}
\DeclareSIUnit\lb{lb}

\DeclareSIUnit\ton{t}

\sisetup{
  per-mode=fraction,
  fraction-function=\nicefrac
}

\RequirePackage{changepage}

\newcommand{\mynewpage}{\checkoddpage \ifoddpage \ \clearpage \fi \ \clearpage}

% Some brackets, etc.
\newcommand{\pqty}[1]{{\left( #1 \right)}}
\newcommand{\bqty}[1]{{\left[ #1 \right]}}
\newcommand{\Bqty}[1]{{\left\{ #1 \right\}}}
\newcommand{\aqty}[1]{{\left\langle #1 \right\rangle}}
\newcommand{\vqty}[1]{{\left\lvert #1 \right\rvert}}
\newcommand{\norm}[1]{{\left\lVert #1 \right\rVert}}

% Fancy footnote symbols
\RequirePackage[symbol]{footmisc}

\RequirePackage[subfigure]{tocloft}

\newcommand{\listurlname}{List of Links}
\newlistof{url}{link}{\listurlname}

\RequirePackage{letltxmacro}
\LetLtxMacro{\oldurl}{\url}
\renewcommand{\url}[1]{%
  \refstepcounter{url}
  \par\noindent\oldurl{#1}
  \addcontentsline{link}{url}{\protect\oldurl{#1}}}